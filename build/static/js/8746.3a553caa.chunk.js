"use strict";(self.webpackChunkmantis_material_react=self.webpackChunkmantis_material_react||[]).push([[8746],{48746:function(e,t,n){n.r(t),n.d(t,{default:function(){return V}});var a=n(29439),i=n(47313),r=n(69099),s=n(51629),o=n(66835),c=n(23477),l=n(24076),d=n(67478),u=n(57861),p=n(66212),Z=n(9019),x=n(77970),m=n(94469),h=n(89688),g=n(36287),f=n(85554),v=n(58467),j=n(5228),b=n(49998),y=n(71325),C=n(88298),k=n(2244),S=n(7519),D=n(60265),I=n(43909),_=n(73836),w=n(42832),O=n(6159),F=n(51405),M=n(21157),P=n(46417),J=function(e){var t=e.chkp,n=e.setChkp,r=(0,f.I0)(),s=(0,i.useState)(1),o=(0,a.Z)(s,2),c=o[0],l=o[1],d=(0,f.v9)((function(e){return e.checkpoint.list})),u=d.listStatus,p=d.checkpointsTab,m=d.nbPages;(0,i.useEffect)((function(){r((0,M.k)({page:c}))}),[c]);return(0,i.useEffect)((function(){u==C.J_.succeed&&n(p[0])}),[u]),(0,P.jsxs)(w.Z,{direction:"row",spacing:1,alignItems:"center",justifyContent:{xs:"center",sm:"flex-end"},sx:{mt:3,mr:2},children:[(0,P.jsx)(O.Z,{size:"small",value:t,onChange:function(e){return n(e.target.value)},children:null===p||void 0===p?void 0:p.map((function(e,t){return(0,P.jsx)(F.Z,{value:e,children:e.libelle},t)}))}),(0,P.jsx)(Z.ZP,{item:!0,xs:12,children:(0,P.jsx)(x.Z,{count:m,page:c,onChange:function(e,t){l(t)}})})]})},R=n(25835);function V(){var e=(0,f.I0)(),t=(0,v.s0)(),n=(0,i.useState)(1),w=(0,a.Z)(n,2),O=w[0],F=w[1],M=(0,i.useState)((0,b.bm)((0,b.IS)())),V=(0,a.Z)(M,2),G=V[0],L=V[1],E=(0,i.useState)((0,b.bm)((0,b.V7)())),N=(0,a.Z)(E,2),T=N[0],z=N[1],B=(0,i.useState)(!1),q=(0,a.Z)(B,2),W=q[0],H=q[1],A=(0,i.useState)({}),K=(0,a.Z)(A,2),Q=K[0],U=K[1],X=(0,f.v9)((function(e){return e.rapport.checkpoint})),Y=X.ListRapport,$=X.nbPages,ee=X.status,te=(0,f.v9)((function(e){return e.checkpoint.list})).listStatus;(0,i.useEffect)((function(){e((0,R.l)({page:O,nbre_ligne:g.iS,start:G,end:T,chkpt_id:Q.id}))}),[O,G,T,Q]);var ne=function(){e((0,_.rR)()),H(!W)};return(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)(r.Z,{variant:"contained",color:"primary",onClick:ne,children:(0,P.jsx)(y.Z,{id:"alerte-formRap-titre"})}),(0,P.jsxs)(h.Z,{title:(0,P.jsx)(y.Z,{id:"report-list"}),content:!1,secondary:(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)(j.Z,{startDate:G,setStartDate:L,endDate:T,setEndDate:z}),(0,P.jsx)(J,{chkp:Q,setChkp:U})]}),children:[ee==C.J_.loading||te==C.J_.loading&&(0,P.jsx)(k.Z,{title:(0,P.jsx)(y.Z,{id:"loading"})}),ee==C.J_.error||te==C.J_.loading&&(0,P.jsx)(k.Z,{title:(0,P.jsx)(y.Z,{id:"error-network"})}),ee==C.J_.succeed&&(0,P.jsxs)(s.Z,{children:[(0,P.jsxs)(o.Z,{sx:{minWidth:350},"aria-label":"simple table",children:[(0,P.jsx)(c.Z,{children:(0,P.jsxs)(l.Z,{children:[(0,P.jsx)(d.Z,{align:"center",children:(0,P.jsx)(y.Z,{id:"date"})}),(0,P.jsx)(d.Z,{align:"center",children:(0,P.jsx)(y.Z,{id:"id-agent"})}),(0,P.jsx)(d.Z,{sx:{pl:3},children:(0,P.jsx)(y.Z,{id:"agent-collecte"})}),(0,P.jsx)(d.Z,{children:(0,P.jsx)(y.Z,{id:"effectif"})}),(0,P.jsx)(d.Z,{children:(0,P.jsx)(y.Z,{id:"validateur"})}),(0,P.jsx)(d.Z,{children:(0,P.jsx)(y.Z,{id:"status"})})]})}),(0,P.jsx)(u.Z,{children:Y.length>0?(0,P.jsx)(P.Fragment,{children:Y.map((function(e,n){return(0,P.jsxs)(l.Z,{hover:!0,onClick:function(){!function(e){t("/apps/reports/details/".concat(e.date),{state:e})}(e)},children:[(0,P.jsx)(d.Z,{align:"center",children:(0,P.jsx)(p.Z,{color:"info",label:new Date(e.date).toLocaleDateString(),size:"small"})}),(0,P.jsx)(d.Z,{sx:{pl:3},children:e.id_agent}),(0,P.jsx)(d.Z,{sx:{pl:3},children:e.agent}),(0,P.jsxs)(d.Z,{children:[e.effectif," ",(0,P.jsx)(y.Z,{id:"heads"})," "]}),(0,P.jsx)(d.Z,{children:e.validateur}),(0,P.jsx)(d.Z,{align:"center",children:(0,P.jsx)(p.Z,{color:"VALIDE"==e.status?"success":"error",label:e.status,size:"small"})})]},n)}))}):(0,P.jsx)(S.o1,{msg:(0,P.jsx)(y.Z,{id:"no-reports"}),colSpan:6})})]}),(0,P.jsx)(Z.ZP,{sx:{p:2,py:3},colSpan:9,children:(0,P.jsx)(Z.ZP,{item:!0,sx:{mt:{xs:2,sm:0}},children:(0,P.jsx)(x.Z,{count:$,page:O,onChange:function(e,t){F(t)},color:"alert",variant:"combined"})})})]})]}),(0,P.jsx)(m.Z,{maxWidth:"sm",TransitionComponent:I.S,keepMounted:!0,fullWidth:!0,onClose:ne,open:W,sx:{"& .MuiDialog-paper":{p:0},transition:"transform 225ms"},"aria-describedby":"alert-dialog-slide-description",children:(0,P.jsx)(D.Z,{handleClose:ne})})]})}},60265:function(e,t,n){n.d(t,{Z:function(){return j}});var a=n(29439),i=n(47313),r=n(11829),s=n(57829),o=n(69099),c=n(9019),l=n(61113),d=n(2244),u=n(71325),p=n(89688),Z=n(88298),x=n(49998),m=n(5228),h=n(85554),g=n(73836),f=n(7681),v=n(46417);function j(e){var t=e.handleClose,n=(0,h.I0)(),j=(0,i.useState)((0,x.bm)((0,x.IS)())),b=(0,a.Z)(j,2),y=b[0],C=b[1],k=(0,i.useState)((0,x.bm)(new Date)),S=(0,a.Z)(k,2),D=S[0],I=S[1],_=(0,h.v9)((function(e){return e.rapport.pdf})),w=_.status,O=_.error;return(0,v.jsxs)(p.Z,{title:(0,v.jsx)(v.Fragment,{children:(0,v.jsx)(u.Z,{id:"alerte-formRap-titre"})}),content:!1,secondary:(0,v.jsx)(s.Z,{sx:{position:"relative",height:"50px",width:"100%"},children:(0,v.jsx)(o.Z,{color:"primary",onClick:t,sx:{position:"absolute",top:0,right:0},children:(0,v.jsx)(r.Z,{})})}),children:[(0,v.jsxs)(c.ZP,{container:!0,spacing:3,alignItems:"center",children:[(0,v.jsx)(m.Z,{startDate:y,setStartDate:C,endDate:D,setEndDate:I}),(0,v.jsx)(c.ZP,{item:!0,children:(0,v.jsx)(o.Z,{variant:"contained",color:"primary",onClick:function(){n((0,g.sG)({start:y,end:D}))},children:(0,v.jsx)(u.Z,{id:"download"})})})]}),w==Z.J_.loading&&(0,v.jsx)(f.D,{title:"loading"}),w==Z.J_.succeed&&(0,v.jsx)(l.Z,{children:"Le PDF a \xe9t\xe9 t\xe9l\xe9charg\xe9 avec succ\xe8s"}),w==Z.J_.error&&(0,v.jsx)(d.Z,{title:(0,v.jsx)(u.Z,{id:O})})]})}},51405:function(e,t,n){n.d(t,{Z:function(){return D}});var a=n(4942),i=n(63366),r=n(87462),s=n(47313),o=n(83061),c=n(21921),l=n(17551),d=n(17592),u=n(77342),p=n(51195),Z=n(38743),x=n(24993),m=n(86983),h=n(99273),g=n(37363),f=n(11081),v=n(77430),j=n(32298);function b(e){return(0,j.Z)("MuiMenuItem",e)}var y=(0,v.Z)("MuiMenuItem",["root","focusVisible","dense","disabled","divider","gutters","selected"]),C=n(46417),k=["autoFocus","component","dense","divider","disableGutters","focusVisibleClassName","role","tabIndex","className"],S=(0,d.ZP)(Z.Z,{shouldForwardProp:function(e){return(0,d.FO)(e)||"classes"===e},name:"MuiMenuItem",slot:"Root",overridesResolver:function(e,t){var n=e.ownerState;return[t.root,n.dense&&t.dense,n.divider&&t.divider,!n.disableGutters&&t.gutters]}})((function(e){var t,n=e.theme,i=e.ownerState;return(0,r.Z)({},n.typography.body1,{display:"flex",justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",minHeight:48,paddingTop:6,paddingBottom:6,boxSizing:"border-box",whiteSpace:"nowrap"},!i.disableGutters&&{paddingLeft:16,paddingRight:16},i.divider&&{borderBottom:"1px solid ".concat((n.vars||n).palette.divider),backgroundClip:"padding-box"},(t={"&:hover":{textDecoration:"none",backgroundColor:(n.vars||n).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}}},(0,a.Z)(t,"&.".concat(y.selected),(0,a.Z)({backgroundColor:n.vars?"rgba(".concat(n.vars.palette.primary.mainChannel," / ").concat(n.vars.palette.action.selectedOpacity,")"):(0,l.Fq)(n.palette.primary.main,n.palette.action.selectedOpacity)},"&.".concat(y.focusVisible),{backgroundColor:n.vars?"rgba(".concat(n.vars.palette.primary.mainChannel," / calc(").concat(n.vars.palette.action.selectedOpacity," + ").concat(n.vars.palette.action.focusOpacity,"))"):(0,l.Fq)(n.palette.primary.main,n.palette.action.selectedOpacity+n.palette.action.focusOpacity)})),(0,a.Z)(t,"&.".concat(y.selected,":hover"),{backgroundColor:n.vars?"rgba(".concat(n.vars.palette.primary.mainChannel," / calc(").concat(n.vars.palette.action.selectedOpacity," + ").concat(n.vars.palette.action.hoverOpacity,"))"):(0,l.Fq)(n.palette.primary.main,n.palette.action.selectedOpacity+n.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:n.vars?"rgba(".concat(n.vars.palette.primary.mainChannel," / ").concat(n.vars.palette.action.selectedOpacity,")"):(0,l.Fq)(n.palette.primary.main,n.palette.action.selectedOpacity)}}),(0,a.Z)(t,"&.".concat(y.focusVisible),{backgroundColor:(n.vars||n).palette.action.focus}),(0,a.Z)(t,"&.".concat(y.disabled),{opacity:(n.vars||n).palette.action.disabledOpacity}),(0,a.Z)(t,"& + .".concat(h.Z.root),{marginTop:n.spacing(1),marginBottom:n.spacing(1)}),(0,a.Z)(t,"& + .".concat(h.Z.inset),{marginLeft:52}),(0,a.Z)(t,"& .".concat(f.Z.root),{marginTop:0,marginBottom:0}),(0,a.Z)(t,"& .".concat(f.Z.inset),{paddingLeft:36}),(0,a.Z)(t,"& .".concat(g.Z.root),{minWidth:36}),t),!i.dense&&(0,a.Z)({},n.breakpoints.up("sm"),{minHeight:"auto"}),i.dense&&(0,r.Z)({minHeight:32,paddingTop:4,paddingBottom:4},n.typography.body2,(0,a.Z)({},"& .".concat(g.Z.root," svg"),{fontSize:"1.25rem"})))})),D=s.forwardRef((function(e,t){var n=(0,u.Z)({props:e,name:"MuiMenuItem"}),a=n.autoFocus,l=void 0!==a&&a,d=n.component,Z=void 0===d?"li":d,h=n.dense,g=void 0!==h&&h,f=n.divider,v=void 0!==f&&f,j=n.disableGutters,y=void 0!==j&&j,D=n.focusVisibleClassName,I=n.role,_=void 0===I?"menuitem":I,w=n.tabIndex,O=n.className,F=(0,i.Z)(n,k),M=s.useContext(p.Z),P=s.useMemo((function(){return{dense:g||M.dense||!1,disableGutters:y}}),[M.dense,g,y]),J=s.useRef(null);(0,x.Z)((function(){l&&J.current&&J.current.focus()}),[l]);var R,V=(0,r.Z)({},n,{dense:P.dense,divider:v,disableGutters:y}),G=function(e){var t=e.disabled,n=e.dense,a=e.divider,i=e.disableGutters,s=e.selected,o=e.classes,l={root:["root",n&&"dense",t&&"disabled",!i&&"gutters",a&&"divider",s&&"selected"]},d=(0,c.Z)(l,b,o);return(0,r.Z)({},o,d)}(n),L=(0,m.Z)(J,t);return n.disabled||(R=void 0!==w?w:-1),(0,C.jsx)(p.Z.Provider,{value:P,children:(0,C.jsx)(S,(0,r.Z)({ref:L,role:_,tabIndex:R,component:Z,focusVisibleClassName:(0,o.Z)(G.focusVisible,D),className:(0,o.Z)(G.root,O)},F,{ownerState:V,classes:G}))})}))}}]);