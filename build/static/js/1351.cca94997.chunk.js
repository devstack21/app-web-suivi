"use strict";(self.webpackChunkmantis_material_react=self.webpackChunkmantis_material_react||[]).push([[1351],{7681:function(e,n,t){t.d(n,{D:function(){return c}});var r=t(9019),i=t(57829),a=t(85281),l=t(42832),o=t(61113),s=t(46417),c=function(e){var n=e.title;return(0,s.jsx)(r.ZP,{container:!0,spacing:3,children:(0,s.jsx)(r.ZP,{item:!0,xs:12,children:(0,s.jsxs)(r.ZP,{container:!0,direction:"column",justifyContent:"center",alignItems:"center",children:[(0,s.jsx)(r.ZP,{item:!0,children:(0,s.jsx)(i.Z,{sx:{display:"flex"},children:(0,s.jsx)(a.Z,{})})}),(0,s.jsx)(r.ZP,{item:!0,children:(0,s.jsx)(l.Z,{spacing:1,children:(0,s.jsx)(o.Z,{align:"center",variant:"h6",children:n})})})]})})})}},11351:function(e,n,t){t.r(n);var r=t(93433),i=t(1413),a=t(29439),l=t(47313),o=t(35604),s=t(21933),c=t(19860),u=t(47825),d=t(69099),m=t(9019),h=t(24631),x=t(1550),f=t(83929),p=t(44758),v=t(83882),Z=t(15103),_=t(6159),j=t(51405),g=t(77970),y=t(66212),k=t(89688),b=t(88298),S=t(11829),C=t(85554),P=t(95357),F=t(76351),V=t(88150),w=t(71325),M=t(7681),E=t(36287),T=t(77960),D=t(86311),B=t(46417),N=s.Ry({min_animal:s.Rx().required((0,B.jsx)(w.Z,{id:"alerte-form-minAnimal"})),max_animal:s.Rx().required((0,B.jsx)(w.Z,{id:"alerte-form-maxAnimal"})),id_ville:s.Z_().required((0,B.jsx)(w.Z,{id:"alerte-form-ville"})),id_animal:s.Z_().required((0,B.jsx)(w.Z,{id:"alerte-form-animal"})),id_contact:s.Z_().required((0,B.jsx)(w.Z,{id:"alerte-form-contact"}))});n.default=function(e){var n=e.alert,t=e.onCancel,s=(0,c.Z)(),W=(0,C.I0)(),J=(0,l.useState)([]),R=(0,a.Z)(J,2),q=R[0],A=R[1],I=(0,l.useState)([]),L=(0,a.Z)(I,2),z=L[0],O=L[1],H=(0,l.useState)(1),$=(0,a.Z)(H,2),G=$[0],U=$[1],K=(0,C.v9)((function(e){return e.location.villes.status})),Q=(0,C.v9)((function(e){return e.location.villes})).ListVille,X=(0,C.v9)((function(e){return e.alert.contact.status})),Y=(0,C.v9)((function(e){return e.alert.contact})).ListContact,ee=(0,C.v9)((function(e){return e.alert.contact.nbPages})),ne=(0,C.v9)((function(e){return e.betail.list})).betailTab;(0,l.useEffect)((function(){ne.length<0&&W((0,P.Z8)({page:1})),Y.length<0&&W((0,F.vH)({page:G,nbre_ligne:E.iS})),Q.length<0&&W((0,V.zU)()),te.setFieldValue("pk",n.pk),te.setFieldValue("min_animal",n.min_animal),te.setFieldValue("max_animal",n.max_animal),te.setFieldValue("type_sms",n.type_sms),te.setFieldValue("type_email",n.type_email),te.setFieldValue("id_ville",n.id_ville),te.setFieldValue("id_animal",n.id_animal),te.setFieldValue("id_contact",1);var e=n.contacts?n.contacts.map((function(e){return e.id})):[];O(e),A(n.contacts?n.contacts:[])}),[n]);var te=(0,o.TA)({initialValues:(0,i.Z)({pk:"",min_animal:"",max_animal:"",type_sms:!1,type_email:!1,id_ville:"",id_animal:"",id_contact:""},n),validationSchema:N,onSubmit:function(e){var n=(0,i.Z)((0,i.Z)({},e),{},{contacts:z});e.min_animal>e.max_animal?te.setErrors({min_animal:(0,B.jsx)(w.Z,{id:"alerte-form-maxmin"}),max_animal:(0,B.jsx)(w.Z,{id:"alerte-form-maxmin"})}):(W((0,T.Gn)(n)),t(""))}}),re=function(e){var n=Y.find((function(n){return n.id===e}));q.some((function(n){return n.id===e}))||(A((function(e){return[].concat((0,r.Z)(e),[n])})),O((function(n){return[].concat((0,r.Z)(n),[e])})))},ie=function(e){A((function(n){return n.filter((function(n){return n!==e}))})),O((function(n){return n.filter((function(n){return n!==e.id}))}))},ae=function(e,n){U(n),W((0,F.vH)({page:n,nbre_ligne:2})),te.setFieldValue("id_contact","")};return X==b.J_.loading||K==b.J_.loading?(0,B.jsx)(k.Z,{title:(0,B.jsx)(w.Z,{id:"edit-alert"}),content:!1,children:(0,B.jsx)(M.D,{title:(0,B.jsx)(w.Z,{id:"loading"})})}):(0,B.jsx)(u.Z,{maxWidth:"sm",children:(0,B.jsx)(k.Z,{title:(0,B.jsx)(w.Z,{id:"edit-alert"}),content:!1,secondary:(0,B.jsx)(d.Z,{color:"primary",onClick:function(){return t("")},children:(0,B.jsx)(S.Z,{})}),children:(0,B.jsx)("form",{onSubmit:te.handleSubmit,children:(0,B.jsxs)(m.ZP,{container:!0,spacing:3,children:[(0,B.jsx)(m.ZP,{item:!0,xs:12,children:(0,B.jsx)(h.Z,{name:"min_animal",label:"Min Animal",type:"number",value:te.values.min_animal,onChange:te.handleChange,fullWidth:!0,error:te.touched.min_animal&&Boolean(te.errors.min_animal),helperText:te.touched.min_animal&&te.errors.min_animal})}),(0,B.jsx)(m.ZP,{item:!0,xs:12,children:(0,B.jsx)(h.Z,{name:"max_animal",label:"Max Animal",type:"number",value:te.values.max_animal,onChange:te.handleChange,fullWidth:!0,error:te.touched.max_animal&&Boolean(te.errors.max_animal),helperText:te.touched.max_animal&&te.errors.max_animal})}),(0,B.jsx)(m.ZP,{item:!0,xs:12,children:(0,B.jsxs)(x.Z,{fullWidth:!0,style:{marginLeft:"20px"},children:[(0,B.jsx)(f.Z,{control:(0,B.jsx)(p.Z,{name:"type_sms",checked:te.values.type_sms,onChange:function(e){te.setFieldValue("type_sms",e.target.checked)},error:te.touched.type_sms&&Boolean(te.errors.type_sms)}),label:"Notification SMS"}),te.touched.type_sms&&te.errors.type_sms&&(0,B.jsx)("div",{children:te.errors.type_sms}),(0,B.jsx)(f.Z,{control:(0,B.jsx)(p.Z,{name:"type_email",checked:te.values.type_email,onChange:function(e){te.setFieldValue("type_email",e.target.checked)},error:te.touched.type_email&&Boolean(te.errors.type_email)}),label:"Notification Email"}),te.touched.type_email&&te.errors.type_email&&(0,B.jsx)("div",{children:te.errors.type_email})]})}),(0,B.jsx)(m.ZP,{item:!0,xs:12,children:(0,B.jsx)(v.Z,{id:"id_ville",value:Q.find((function(e){return e.pk===te.values.id_ville}))||null,onChange:function(e,n){te.setFieldValue("id_ville",n?n.pk:"")},onBlur:function(){return te.setFieldTouched("id_ville")},getOptionLabel:function(e){return e?e.name:""},options:Q,isOptionEqualToValue:function(e,n){return e.pk===n},renderInput:function(e){return(0,B.jsx)(h.Z,(0,i.Z)((0,i.Z)({},e),{},{placeholder:"Select ville",sx:{"& .MuiAutocomplete-input.Mui-disabled":{WebkitTextFillColor:s.palette.text.primary}},error:te.touched.id_ville&&Boolean(te.errors.id_ville),helperText:te.touched.id_ville&&te.errors.id_ville}))}})}),(0,B.jsx)(m.ZP,{item:!0,xs:12,children:(0,B.jsx)(v.Z,{id:"id_animal",value:ne.find((function(e){return e.id===te.values.id_animal}))||null,onChange:function(e,n){te.setFieldValue("id_animal",n?n.id:"")},onBlur:function(){return te.setFieldTouched("id_animal")},getOptionLabel:function(e){return e?e.name:""},options:ne,isOptionEqualToValue:function(e,n){return e.id===n},renderInput:function(e){return(0,B.jsx)(h.Z,(0,i.Z)((0,i.Z)({},e),{},{placeholder:"Select animal",sx:{"& .MuiAutocomplete-input.Mui-disabled":{WebkitTextFillColor:s.palette.text.primary}},error:te.touched.id_animal&&Boolean(te.errors.id_animal),helperText:te.touched.id_animal&&te.errors.id_animal}))}})}),(0,B.jsx)(m.ZP,{item:!0,xs:12,children:(0,B.jsxs)(x.Z,{fullWidth:!0,children:[(0,B.jsx)(Z.Z,{children:"Contact"}),(0,B.jsx)(_.Z,{name:"id_contact",value:te.values.id_contact,onChange:function(e){te.handleChange(e),re(e.target.value)},error:te.touched.id_contact&&Boolean(te.errors.id_contact),helperText:te.touched.id_contact&&te.errors.id_contact,children:Y.map((function(e,n){return(0,B.jsxs)(j.Z,{value:e.id,children:[e.email,"-",e.phone]},n)}))})]})}),(0,B.jsx)(m.ZP,{item:!0,xs:12,children:(0,B.jsx)(g.Z,{count:ee,page:G,onChange:ae})}),(0,B.jsx)(m.ZP,{item:!0,xs:12,children:q.map((function(e,n){return(0,B.jsx)(y.Z,{label:"".concat(e.email,"-").concat(e.phone),onDelete:function(){return ie(e)}},n)}))}),(0,B.jsx)(m.ZP,{item:!0,xs:12,children:(0,B.jsxs)(x.Z,{fullWidth:!0,children:[(0,B.jsx)(Z.Z,{children:"Contact"}),(0,B.jsx)(_.Z,{name:"id_contact",value:te.values.id_contact,onChange:function(e){te.handleChange(e),re(e.target.value)},error:te.touched.id_contact&&Boolean(te.errors.id_contact),helperText:te.touched.id_contact&&te.errors.id_contact,children:Y.map((function(e,n){return(0,B.jsxs)(j.Z,{value:e.id,children:[e.email,"-",e.phone]},n)}))})]})}),(0,B.jsx)(m.ZP,{item:!0,xs:12,children:(0,B.jsx)(g.Z,{count:ee,page:G,onChange:ae})}),(0,B.jsx)(m.ZP,{item:!0,xs:12,children:q.map((function(e,n){return(0,B.jsx)(y.Z,{label:"".concat(e.email,"-").concat(e.phone),onDelete:function(){return ie(e)}},n)}))}),(0,B.jsx)(m.ZP,{item:!0,xs:12,children:(0,B.jsx)(d.Z,{type:"submit",variant:"contained",color:"primary",children:(0,B.jsx)(w.Z,{id:"detailrapport-Validateur"})})}),(0,B.jsx)(D.Z,{})]})})})})}},86311:function(e,n,t){var r=t(36287),i=t(47313),a=t(71325),l=t(85554),o=t(10825),s=t(77960),c=t(40115),u=t(18530),d=t(88298),m=t(58467),h=t(41984),x=t(46417);n.Z=function(){var e=(0,l.v9)((function(e){return e.alert.create})),n=e.createStatus,t=e.createError,f=(0,l.v9)((function(e){return e.alert.edit})),p=f.editStatus,v=f.editError,Z=(0,l.v9)((function(e){return e.alert.delete})),_=Z.deleteStatus,j=Z.deleteError,g=(0,l.I0)(),y=(0,m.s0)();return(0,i.useEffect)((function(){n==d.J_.succeed&&(g((0,u.ss)({open:!0,message:(0,x.jsx)(a.Z,{id:"add-alert-succeed"}),variant:"alert",alert:{color:"success"},close:!1})),g((0,c.EN)({page:1,nbre_ligne:r.iS})),g((0,o.wM)()),y("/apps/alerts/list/")),n==d.J_.error&&(g((0,u.ss)({open:!0,message:(0,x.jsx)(a.Z,{id:t}),variant:"alert",alert:{color:"error"},close:!1})),g((0,o.wM)()))}),[n]),(0,i.useEffect)((function(){p==d.J_.succeed&&(g((0,u.ss)({open:!0,message:(0,x.jsx)(a.Z,{id:"update-alert-succeed"}),variant:"alert",alert:{color:"success"},close:!1})),g((0,c.EN)({page:1,nbre_ligne:r.iS})),g((0,s.C$)()),y("/apps/alerts/list/")),p==d.J_.error&&(g((0,u.ss)({open:!0,message:(0,x.jsx)(a.Z,{id:v}),variant:"alert",alert:{color:"error"},close:!1})),g((0,s.C$)()))}),[p]),console.log("mon error",j),(0,i.useEffect)((function(){_==d.J_.succeed&&(g((0,u.ss)({open:!0,message:(0,x.jsx)(a.Z,{id:"delete-alert-succeed"}),variant:"alert",alert:{color:"success"},close:!1})),g((0,c.EN)({page:1,nbre_ligne:r.iS})),g((0,h.jr)())),_==d.J_.error&&(g((0,u.ss)({open:!0,message:(0,x.jsx)(a.Z,{id:j}),variant:"alert",alert:{color:"error"},close:!1})),g((0,h.jr)()))}),[_]),null}},85281:function(e,n,t){t.d(n,{Z:function(){return E}});var r=t(30168),i=t(63366),a=t(87462),l=t(47313),o=t(83061),s=t(21921),c=t(30686),u=t(91615),d=t(77342),m=t(17592),h=t(77430),x=t(32298);function f(e){return(0,x.Z)("MuiCircularProgress",e)}(0,h.Z)("MuiCircularProgress",["root","determinate","indeterminate","colorPrimary","colorSecondary","svg","circle","circleDeterminate","circleIndeterminate","circleDisableShrink"]);var p,v,Z,_,j,g,y,k,b=t(46417),S=["className","color","disableShrink","size","style","thickness","value","variant"],C=44,P=(0,c.F4)(j||(j=p||(p=(0,r.Z)(["\n  0% {\n    transform: rotate(0deg);\n  }\n\n  100% {\n    transform: rotate(360deg);\n  }\n"])))),F=(0,c.F4)(g||(g=v||(v=(0,r.Z)(["\n  0% {\n    stroke-dasharray: 1px, 200px;\n    stroke-dashoffset: 0;\n  }\n\n  50% {\n    stroke-dasharray: 100px, 200px;\n    stroke-dashoffset: -15px;\n  }\n\n  100% {\n    stroke-dasharray: 100px, 200px;\n    stroke-dashoffset: -125px;\n  }\n"])))),V=(0,m.ZP)("span",{name:"MuiCircularProgress",slot:"Root",overridesResolver:function(e,n){var t=e.ownerState;return[n.root,n[t.variant],n["color".concat((0,u.Z)(t.color))]]}})((function(e){var n=e.ownerState,t=e.theme;return(0,a.Z)({display:"inline-block"},"determinate"===n.variant&&{transition:t.transitions.create("transform")},"inherit"!==n.color&&{color:(t.vars||t).palette[n.color].main})}),(function(e){return"indeterminate"===e.ownerState.variant&&(0,c.iv)(y||(y=Z||(Z=(0,r.Z)(["\n      animation: "," 1.4s linear infinite;\n    "]))),P)})),w=(0,m.ZP)("svg",{name:"MuiCircularProgress",slot:"Svg",overridesResolver:function(e,n){return n.svg}})({display:"block"}),M=(0,m.ZP)("circle",{name:"MuiCircularProgress",slot:"Circle",overridesResolver:function(e,n){var t=e.ownerState;return[n.circle,n["circle".concat((0,u.Z)(t.variant))],t.disableShrink&&n.circleDisableShrink]}})((function(e){var n=e.ownerState,t=e.theme;return(0,a.Z)({stroke:"currentColor"},"determinate"===n.variant&&{transition:t.transitions.create("stroke-dashoffset")},"indeterminate"===n.variant&&{strokeDasharray:"80px, 200px",strokeDashoffset:0})}),(function(e){var n=e.ownerState;return"indeterminate"===n.variant&&!n.disableShrink&&(0,c.iv)(k||(k=_||(_=(0,r.Z)(["\n      animation: "," 1.4s ease-in-out infinite;\n    "]))),F)})),E=l.forwardRef((function(e,n){var t=(0,d.Z)({props:e,name:"MuiCircularProgress"}),r=t.className,l=t.color,c=void 0===l?"primary":l,m=t.disableShrink,h=void 0!==m&&m,x=t.size,p=void 0===x?40:x,v=t.style,Z=t.thickness,_=void 0===Z?3.6:Z,j=t.value,g=void 0===j?0:j,y=t.variant,k=void 0===y?"indeterminate":y,P=(0,i.Z)(t,S),F=(0,a.Z)({},t,{color:c,disableShrink:h,size:p,thickness:_,value:g,variant:k}),E=function(e){var n=e.classes,t=e.variant,r=e.color,i=e.disableShrink,a={root:["root",t,"color".concat((0,u.Z)(r))],svg:["svg"],circle:["circle","circle".concat((0,u.Z)(t)),i&&"circleDisableShrink"]};return(0,s.Z)(a,f,n)}(F),T={},D={},B={};if("determinate"===k){var N=2*Math.PI*((C-_)/2);T.strokeDasharray=N.toFixed(3),B["aria-valuenow"]=Math.round(g),T.strokeDashoffset="".concat(((100-g)/100*N).toFixed(3),"px"),D.transform="rotate(-90deg)"}return(0,b.jsx)(V,(0,a.Z)({className:(0,o.Z)(E.root,r),style:(0,a.Z)({width:p,height:p},D,v),ownerState:F,ref:n,role:"progressbar"},B,P,{children:(0,b.jsx)(w,{className:E.svg,ownerState:F,viewBox:"".concat(22," ").concat(22," ").concat(C," ").concat(C),children:(0,b.jsx)(M,{className:E.circle,style:T,ownerState:F,cx:C,cy:C,r:(C-_)/2,fill:"none",strokeWidth:_})})}))}))}}]);